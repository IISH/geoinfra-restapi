         #LoadModule proxy_module modules/mod_proxy.so
         #LoadModule proxy_http_module modules/mod_proxy_http.so
         <Directory "/var/www/iisg">
		Options Indexes FollowSymLinks MultiViews
		AllowOverride None
		Order allow,deny
		allow from all

		Header set Access-Control-Allow-Origin "*"
		Header set Content-Type "application/json;charset=utf8"
#		AddDefaultCharset UTF-8

		RewriteEngine On

	        # %20 = spatie
       		# %25 = procent ( voor like '25%' )
        	# %27 = single quote ( voor ='25' )
        	# %3D = =-teken ( voor ='25' )
        	# EN let op: elk procent tekentje moet je weer escapen met een /


        #START_YEAR and END_YEAR
        RewriteCond %{QUERY_STRING} ^start_year=([0-9]+)&end_year=([0-9]+)$
        RewriteRule ^countries/([a-z,A-Z]+)$ http://localhost:8081/geoserver/iisg/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=iisg:inperiod&outputFormat=application/json&viewparams=start_year:%1;end_year:%2&cql_filter=name\%3D\%27$1\%27 [P,L]
        RewriteRule ^countries/bysupra/(.+)$ http://localhost:8081/geoserver/iisg/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=iisg:bysupra&outputFormat=application/json&viewparams=supra_id:$1 [P,L]
        #start_year and end_year, all countries
        RewriteCond %{QUERY_STRING} ^start_year=([0-9]+)&end_year=([0-9]+)$
        RewriteRule ^countries$ http://localhost:8081/geoserver/iisg/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=iisg:inperiod&outputFormat=application/json&viewparams=start_year:%1;end_year:%2 [P,L]
        
        #YEAR
        RewriteCond %{QUERY_STRING} ^year=([0-9]+)$
        RewriteRule ^countries/bysupra/(.+)$ http://localhost:8081/geoserver/iisg/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=iisg:bysupra&outputFormat=application/json&viewparams=supra_id:$1&cql_filter=name\%3D\%27$1\%27 [P,L]
        RewriteCond %{QUERY_STRING} ^year=([0-9]+)$
        RewriteRule ^countries/(.+)$ http://localhost:8081/geoserver/iisg/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=iisg:byyear&outputFormat=application/json&viewparams=year:%1&cql_filter=name\%3D\%27$1\%27 [P,L]
        
        #NO PARAMS
        #filter by country name
        RewriteRule ^countries/(.+)$  http://localhost:8081/geoserver/iisg/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=iisg:byyear&outputFormat=application/json&cql_filter=name\%3D\%27$1\%27 [P,L]
        #all countries
        RewriteRule ^countries$  http://localhost:8081/geoserver/iisg/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=iisg:byyear&outputFormat=application/json [P,L]
		# pc1 => Alles
		RewriteRule ^search/pc1$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc1&SRSNAME=EPSG:4326&outputFormat=application/json&sortBy=postcode [B,P]

		# pc1 => Enkelvoudig (is eigenlijk een vereenvoudiging/alias van de 'Filter Comma Separated' !
		RewriteRule ^search/pc1/(\d{1})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc1&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20\%3D\%20\%27$1\%27 [B,P]

            # We cannot do a range as there are only single numbers ;-)

		# pc1 => Filter Comma Separated
		RewriteRule ^search/pc1/(('\d{1}',?)+)$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc1&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20in\%20($1)&sortBy=postcode [B,P]

        # pc1: op basis van bbox:
        RewriteRule ^search/pc1/(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6},-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc1&SRSNAME=EPSG:4326&outputFormat=application/json&BBOX=$1,EPSG:4326&sortBy=postcode [B,P]

		# pc2 => Alles
		RewriteRule ^search/pc2$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc2&SRSNAME=EPSG:4326&outputFormat=application/json&sortBy=postcode [B,P]

		# pc2 => Enkelvoudig (is eigenlijk een vereenvoudiging/alias van de 'Filter Comma Separated' !
		RewriteRule ^search/pc2/(\d{2})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc2&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20\%3D\%20\%27$1\%27 [B,P]

		# pc2 => Reeks  op basis van 1 cijfer
		RewriteRule ^search/pc2/(\d{1})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc2&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20like\%20\%27$1\%25\%27&sortBy=postcode [B,P]
		
		# pc2 => Filter Comma Separated
		RewriteRule ^search/pc2/(('\d{2}',?)+)$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc2&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20in\%20($1)&sortBy=postcode [B,P]

        # pc2: op basis van bbox:
        RewriteRule ^search/pc2/(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6},-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc2&SRSNAME=EPSG:4326&outputFormat=application/json&BBOX=$1,EPSG:4326&sortBy=postcode [B,P]

	        # pc3 NIET ALLES !

		# pc3 => Enkelvoudig (is eigenlijk een vereenvoudiging/alias van de 'Filter Comma Separated' !
		RewriteRule ^search/pc3/(\d{3})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc3&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20\%3D\%20\%27$1\%27 [B,P]

		# pc3 => Reeks op basis van 2 cijfers
		RewriteRule ^search/pc3/(\d{2})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc3&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20like\%20\%27$1\%25\%27&sortBy=postcode [B,P]

		# pc3 => Filter Comma Separated
		RewriteRule ^search/pc3/(('\d{3}',?)+)$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc3&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20in\%20($1)&sortBy=postcode [B,P]

        # pc3: op basis van bbox:
        RewriteRule ^search/pc3/(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6},-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc3&SRSNAME=EPSG:4326&outputFormat=application/json&BBOX=$1,EPSG:4326&sortBy=postcode [B,P]

        	# pc4 NIET ALLES !

		# pc4 => Enkelvoudig (is eigenlijk een vereenvoudiging/alias van de 'Filter Comma Separated' !
		RewriteRule ^search/pc4/(\d{4})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc4&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20\%3D\%20\%27$1\%27 [B,P]

		# pc4 => Reeks op basis van 3 cijfers
		RewriteRule ^search/pc4/(\d{3})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc4&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20like\%20\%27$1\%25\%27&sortBy=postcode [B,P]

		# pc4 => Filter Comma Separated
		RewriteRule ^search/pc4/(('\d{4}',?)+)$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc4&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20in\%20($1)&sortBy=postcode [B,P]

        # pc4: op basis van bbox:
        RewriteRule ^search/pc4/(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6},-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc4&SRSNAME=EPSG:4326&outputFormat=application/json&BBOX=$1,EPSG:4326&sortBy=postcode [B,P]

        	# pc5 NIET ALLES !

		# pc5 => Enkelvoudig (is eigenlijk een vereenvoudiging/alias van de 'Filter Comma Separated' !
		RewriteRule ^search/pc5/(\d{4}[a-zA-Z]{1})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc5&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20\%3D\%20\%27${uc:$1}\%27 [B,P]

		# pc5 => Reeks op basis van 4 cijfers
		RewriteRule ^search/pc5/(\d{4})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc5&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20like\%20\%27$1\%25\%27&sortBy=postcode [B,P]

		# pc5 => Filter Comma Separated
		RewriteRule ^search/pc5/(('\d{4}[a-zA-Z]{1}',?)+)$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc5&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20in\%20(${uc:$1})&sortBy=postcode [B,P]

        # pc5: op basis van bbox:
        RewriteRule ^search/pc5/(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6},-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc5&SRSNAME=EPSG:4326&outputFormat=application/json&BBOX=$1,EPSG:4326&sortBy=postcode [B,P]

        	# pc6 NIET ALLES !

		# pc6 => Enkelvoudig (is eigenlijk een vereenvoudiging/alias van de 'Filter Comma Separated' !
		RewriteRule ^search/pc6/(\d{4}[a-zA-Z]{2})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc6&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20\%3D\%20\%27${uc:$1}\%27 [B,P]

		# pc6 => Reeks op basis van 5 cijfers
		RewriteRule ^search/pc6/(\d{4}[a-zA-Z]{1})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc6&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20like\%20\%27${uc:$1}\%25\%27&sortBy=postcode [B,P]

		# pc6 => Filter Comma Separated
		RewriteRule ^search/pc6/(('\d{4}[a-zA-Z]{2}',?)+)$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc6&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20in\%20(${uc:$1})&sortBy=postcode [B,P]

        # pc6: op basis van bbox:
        RewriteRule ^search/pc6/(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6},-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:pc6&SRSNAME=EPSG:4326&outputFormat=application/json&BBOX=$1,EPSG:4326&sortBy=postcode [B,P]

		# addressen: alle adressen op basis van 1 volledige postcode
		RewriteRule ^search/adres/(\d{4}[a-zA-Z]{2})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAME=stb:adres&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20\%3D\%20\%27${uc:$1}\%27&sortBy=straat,huisnummer,huisletter,huisnummertoevoeging [B,P]

		# addressen: alle adressen op basis van 1 volledige postcode PLUS een huisnummer
		RewriteRule ^search/adres/(\d{4}[a-zA-Z]{2})\s{1}(\d+)$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:adres&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20\%3D\%20\%27$1\%27\%20AND\%20huisnummer\%3D$2 [B,P]

		# addressen: alle adressen op basis van 1 OF meerdere postcodes komma separated
		RewriteRule ^search/adres/(('\d{4}[a-zA-Z]{2}',?)+)$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:adres&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=postcode\%20in\%20(${uc:$1})&sortBy=straat,huisnummer,huisletter,huisnummertoevoeging [B,P]

	        #adressen: alle adressen op basis van bbox:
        	RewriteRule ^search/adres/(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6},-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6},-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:adres&SRSNAME=EPSG:4326&outputFormat=application/json&BBOX=$1,EPSG:4326&sortBy=straat,huisnummer,huisletter,huisnummertoevoeging [B,P]

	        #adressen: alle adressen op basis van puntlocatie en straal:
        	RewriteRule ^search/adres/(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6}),(-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6}),(\d{1,4})$ http://192.168.122.31:8080/geoserver/wfs/?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=stb:adres&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=DWITHIN\%28geog,POINT\%28$3\%20$1\%29,$5,meters\%29&sortBy=straat,huisnummer,huisletter,huisnummertoevoeging [B,P] 

	        #adressen: alle adressen op basis van een polygoon:
	        #First rewrite for WKT encoding:
	        RewriteRule ^search/adres/(-?[1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9]\.\d{1,6},-?(?:[1-8]?[1-9]|[1-9]0)\.\d{1,6},{0,1}){4,}$ ${wkt:%{REQUEST_URI}} [PT]
        	#Second rewrite for actual PiP
	        RewriteRule ^search/adres/((-?[1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9]\.\d{1,6}\s-?(?:[1-8]?[1-9]|[1-9]0)\.\d{1,6},{0,1}){4,})$ http://192.168.122.31:8080/geoserver/wfs?SERVICE=WFS&VERSION=1.0.0&REQUEST=GetFeature&TYPENAME=stb:adres&SRSNAME=EPSG:4326&outputFormat=application/json&cql_filter=INTERSECTS\%28geog,\%20POLYGON\%20\%28\%28$1\%29\%29\%29&sortBy=straat,huisnummer,huisletter,huisnummertoevoeging [B,P]

</Directory>
