---
  classes:
    - geoinfra
    - nodejs
  geoinfra::environment::variables:
    GEOINFRA_HOME: "/opt/geoinfra"
    "export GEOINFRA_API_CONFIG": "/opt/geoinfra/config.yml"
  geoinfra::instance_config:
    pg:
      d: "geoinfra"
      h: "localhost"
      p: "geoinfra"
      u: "geoinfra"
    hg:
      baseUrl: "http://localhost:3001"
    qb:
      fromTable:
        entities: "geoinfra.entities"
  postgresql::globals::encoding: "UTF-8"
  postgresql::globals::locale: "en_US.UTF-8"
  postgresql::globals::manage_package_repo: true
  postgresql::globals::version: "9.4"
  postgresql::server::db:
    geoinfra:
      user: "geoinfra"
      password: "md5ac0870ed1147c3a0ba959602774869d6"
  postgresql::server::pg_hba_rule:
    Access to delivery from %{::fqdn}:
      description: "Open up postgresql for access from %{::ipaddress}"
      type: "host"
      database: "geoinfra"
      user: "geoinfra"
      address: "172.28.0.0/16"
      auth_method: "md5"
  nodejs::repo_url_suffix: "node_0.12"
  nodejs::npm:
    restapi:
      home_dir: "/opt/geoinfra"
      source: "https://github.com/IISH/geoinfra-restapi.git"
      target: "/opt/geoinfra"
      user: "geoinfra"
    pm2:
      install_options: ["--global"]
      target: "/tmp"

